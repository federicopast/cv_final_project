$(document).ready(function(){
//Domain
var dom2D = DOMAIN([[0,1],[0,1]])([60,60]);
var domainFrame2_0 = DOMAIN([[0,2*PI],[0.55,PI/1.968]])([50,50]);
var domainFrame3_0 = DOMAIN([[0,2*PI],[0.4,0.542]])([50,50]);
//Function torus
var torus = function (R, r){
	return mapping = function (v) {
		var a = v[0]
		var b = v[1]

		var u = (r * COS(a) + R) * COS(b);
		var v = (r * COS(a) + R) * SIN(b);
		var w = (r * SIN(a));
		return [u,v,w];
	};
};


//Base model
var base0_map = COLOR([0.75,0.93,1,0.5])(DISK(5)([60,1]));
var base1_map = COLOR([0.75,0.93,1,0.5])(T([2])([0.1])(DISK(5)([60,1])));
var base2_map = COLOR([0.75,0.93,1,1])(CYL_SURFACE([5,0.1])([60,1]));
var base_table = STRUCT([base0_map,base1_map,base2_map]);

//Table frame model
var c_f0 = T([2])([-0.4])(EXTRUDE([0.4])(DISK(0.135)([30,1])));
var c_f1 = T([2])([-1.63])(EXTRUDE([1.2])(DISK(0.135)([30,1])));
var c_f2 = T([2])([-2.86])(EXTRUDE([1.2])(DISK(0.135)([30,1])));
var c_f3 = T([2])([-3.28])(EXTRUDE([0.4])(DISK(0.135)([30,1])));
var c_f4 = T([2])([-0.43])(EXTRUDE([0.03])(DISK(0.10)([30,1])));
var c_f5 = T([2])([-1.66])(EXTRUDE([0.03])(DISK(0.10)([30,1])));
var c_f6 = T([2])([-2.89])(EXTRUDE([0.03])(DISK(0.10)([30,1])));
var center_frame = STRUCT([c_f0,c_f1,c_f2,c_f3,c_f4,c_f5,c_f6]);

var f_01 = T([0,2])([-3.3,-4.45])(R([0,2])([PI/3])(EXTRUDE([8])(DISK(0.115)([30,1]))));
var f_02 = T([0,2])([4,-4.4])(R([0,2])(-PI/35)(EXTRUDE([4.4])(DISK(0.115)([30,1]))));
var f_03 = T([0,2])([-1.6,-3.47])(R([0,2])(-PI/6)(EXTRUDE([3.93])(DISK(0.115)([30,1]))));
var f_04 = T([0,2])([-0.5,-2.75])(R([0,2])(-PI/3)(EXTRUDE([2.47])(DISK(0.035)([30,1]))));
var f_05 = T([0,2])([4,-4])(R([0,2])(-PI/3)(EXTRUDE([3.7])(DISK(0.035)([30,1]))));
var f_06 = T([0,2])([4.014,-4.57])(R([0,2])(-PI/35)(EXTRUDE([0.6])(DISK(0.125)([30,1]))));

var p1_0 = [[0,0,0],[0,0.183,0],[0.294,0.183,0],[0.294,0,0],[0.294,-0.183,0],[0,-0.183,0],[0,0,0]];
var p1_1 = [[0,0,0],[0,0.183,0],[0.294,0.183,0.04],[0.294,0,0.04],[0.294,-0.183,0.04],[0,-0.183,0],[0,0,0]];
var p1_2 = [[0,0,0.001],[0,0.151,0.001],[0.23,0.15,0.0306],[0.23,0,0.0306]];
var p1_3 = [[0,0,0.001],[0,-0.152,0.001],[0.23,-0.148,0.0306],[0.23,0,0.0306]];
var c1_0 = BEZIER(S0)(p1_0);
var c1_1 = BEZIER(S0)(p1_1);
var c1_2 = BEZIER(S0)(p1_2);
var c1_3 = BEZIER(S0)(p1_3);
var mp1_1 = BEZIER(S1)([c1_0,c1_1]);
var mp1_2 = BEZIER(S1)([c1_2,c1_3]);
var s1_1 = T([0,2])([3.72,-0.01])(R([0,2])(-PI/35)(R([0,1])(PI)(MAP(mp1_1)(dom2D))));
var s1_2 = T([0,2])([3.72,-0.01])(R([0,2])(-PI/35)(R([0,1])(PI)(MAP(mp1_2)(dom2D))));
var surf1 = STRUCT([s1_1,s1_2]);
var b_surf1 = T([0,2])([3.89,-4.582])(S([0,1,2])([1.085,1.085,1.085])(R([0,2])(-PI/29)(R([0,1])(PI)(R([0,2])(PI)(STRUCT([MAP(mp1_1)(dom2D),MAP(mp1_2)(dom2D)]))))));

var p2_0 = [[0,0,0],[0,0.18,0],[0.294,0.1842,-0.001],[0.294,0,-0.001],[0.294,-0.1842,-0.001],[0,-0.18,0],[0,0,0]];
var p2_1 = [[0,0,0.01],[0,0.183,0.01],[0.294,0.183,0.182],[0.294,0,0.182],[0.294,-0.183,0.182],[0,-0.183,0.01],[0,0,0.01]];
var p2_2 = [[0,0,0.01],[0,0.151,0.01],[0.229,0.15,0.145],[0.229,0,0.145]];
var p2_3 = [[0,0,0.01],[0,-0.152,0.01],[0.229,-0.148,0.145],[0.229,0,0.145]];
var c2_0 = BEZIER(S0)(p2_0);
var c2_1 = BEZIER(S0)(p2_1);
var c2_2 = BEZIER(S0)(p2_2);
var c2_3 = BEZIER(S0)(p2_3);
var mp2_1 = BEZIER(S1)([c2_0,c2_1]);
var mp2_2 = BEZIER(S1)([c2_2,c2_3]);
var s2_1 = T([0,2])([-3.465,-0.01])(R([0,2])(-PI/6)(R([0,1])(PI)(MAP(mp2_1)(dom2D))));
var s2_2 = T([0,2])([-3.465,-0.01])(R([0,2])(-PI/6)(R([0,1])(PI)(MAP(mp2_2)(dom2D))));
var surf2 = STRUCT([s2_1,s2_2]);

var p3_0 = [[0,0,-0.1],[0,0.208,-0.1],[0.3328,0.208,-0.1],[0.3328,0,-0.1],[0.3328,-0.208,-0.1],[0,-0.208,-0.1],[0,0,-0.1]];
var p3_1 = [[0,0,0],[0,0.208,0],[0.3328,0.208,0.56],[0.3328,0,0.56],[0.3328,-0.208,0.56],[0,-0.208,0],[0,0,0]];
var c3_0 = BEZIER(S0)(p3_0);
var c3_1 = BEZIER(S0)(p3_1);
var mp3_1 = BEZIER(S1)([c3_0,c3_1]);
var s3_1 = T([0,2])([-3.465,-0.01])(R([0,2])(-PI/35)(R([0,1])(PI)(MAP(mp3_1)(dom2D))));
var s3_2 = T([0,2])([-3.62,-4.6])(EXTRUDE([0.01])(DISK(0.4)([50,1])));
var surf3 = T([0,2])([-1.554,-7.0805])(R([0,2])(PI/3.3)(R([1,2])(PI)(S([0,1,2])([0.88,0.88,0.88])(s3_1))));
var table_frame1 = COLOR([211/255,211/255,211/255])(STRUCT([f_01,f_02,f_03,f_04,f_05,f_06,surf1,b_surf1,surf2,surf3,s3_2]));

var s4 = T([1,2])([-1,-6.7])(R([1,2])(PI/8)(R([0,2])(-PI/2)(MAP(torus(6,0.115))(domainFrame2_0))));
var s5 = T([1,2])([-3.79,-25.52])(R([1,2])(PI/8)(R([0,2])(-PI/2)(MAP(torus(25,0.115))(domainFrame3_0))));
var s6 = T([1,2])([-3.981,-4.56])(R([1,2])(-PI/35)(EXTRUDE([4.561])(DISK(0.115)([50,1]))));
var s7 = T([1])([0.0338])(R([0,1])(-PI/2)(surf1));
var s8 = T([1,2])([1.1,-2.3])(R([1,2])(-PI/4)(T([1,2])([-3,-4])(EXTRUDE([3.3])(DISK(0.035)([30,1])))));
var p4_0 = [[0,0,0],[0,0.208,0],[0.3328,0.208,0.015],[0.3328,0,0.015],[0.3328,-0.208,0.015],[0,-0.208,0],[0,0,0]];
var p4_1 = [[0,0,0],[0,0.208,0],[0.3328,0.208,0.15],[0.3328,0,0.15],[0.3328,-0.208,0.15],[0,-0.208,0],[0,0,0]];
var c4_0 = BEZIER(S0)(p4_0);
var c4_1 = BEZIER(S0)(p4_1);
var mp4_1 = BEZIER(S1)([c4_0,c4_1]);
var s9 = T([1,2])([4.494,-4.588])(S([0,1])([0.87,0.87])(R([1,2])(PI/8.2)(R([0,2])(PI)(R([0,1])(PI/2)(MAP(mp4_1)(dom2D))))));
var s10 = R([0,1])(-PI/2)(T([0,2])([-4.52,-4.6])(EXTRUDE([0.01])(DISK(0.4)([50,1]))));
var b_surf2 = T([1,2])([0.023,0.012])(R([0,1])(-PI/2)(T([0,2])([3.89,-4.582])(R([0,2])(-PI/29)(R([0,1])(PI)(R([0,2])(PI)(STRUCT([MAP(mp1_1)(dom2D),MAP(mp1_2)(dom2D)])))))));
var s11 = T([1,2])([2.2,-1.641])(R([1,2])(-PI/6)(EXTRUDE([1.82])(DISK(0.115)([50,1]))));
var s12 = T([1,2])([1.4,-1.2])(R([1,2])(-PI/3)(EXTRUDE([1.8])(DISK(0.035)([50,1]))));

var p4_0 = [[0,0,0],[0,0.183,0],[0.294,0.183,0],[0.294,0,0],[0.294,-0.183,0],[0,-0.183,0],[0,0,0]];
var p4_1 = [[0,0,0.01],[0,0.183,0.01],[0.294,0.183,0.177],[0.294,0,0.177],[0.294,-0.183,0.177],[0,-0.183,0.01],[0,0,0.01]];
var p4_2 = [[0,0,0.011],[0,0.151,0.004],[0.229,0.15,0.141],[0.229,0,0.141]];
var p4_3 = [[0,0,0.011],[0,-0.152,0.004],[0.229,-0.148,0.141],[0.229,0,0.141]];
var c4_0 = BEZIER(S0)(p4_0);
var c4_1 = BEZIER(S0)(p4_1);
var c4_2 = BEZIER(S0)(p4_2);
var c4_3 = BEZIER(S0)(p4_3);
var mp4_1 = BEZIER(S1)([c4_0,c4_1]);
var mp4_2 = BEZIER(S1)([c4_2,c4_3]);
var s4_1 = MAP(mp4_1)(dom2D);
var s4_2 = MAP(mp4_2)(dom2D);
var surf4 = T([1,2])([3.011,-0.008])(R([1,2])(-PI/6)(R([0,1])(PI/2)(STRUCT([s4_1,s4_2]))));

var table_frame2 = STRUCT([s4,s5,s6,s7,s8,s9,s10,b_surf2,s11,s12,surf4]);

//Table model
var table = STRUCT([base_table,center_frame,table_frame1,table_frame2]);
DRAW(table);
});